{% set PROTOTYPEURL = "" %}
{% set serviceName = "Contact preferences" %}
{% set contentTitle = "Prototypes" %}
{% set title = contentTitle + " - " + serviceName %}
{% block pageScripts %}
<script type="text/javascript">
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', (e) => {
  // Prevent Chrome 67 and earlier from automatically showing the prompt
  e.preventDefault();
  // Stash the event so it can be triggered later.
  deferredPrompt = e;
});

async function install() {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    console.log(deferredPrompt)
    deferredPrompt.userChoice.then(function(choiceResult){

      if (choiceResult.outcome === 'accepted') {
      console.log('Your PWA has been installed');
    } else {
      console.log('User chose to not install your PWA');
    }

    deferredPrompt = null;

    });


  }
}

</script>
{% endblock %}


<!-- Extends the layout from /app/views/layouts/layout.html -->
{% extends 'layouts/layout-transactional.html' %}

<!-- Set the page title inside this block -->
{% block pageTitle %}
  {{ title }}
{% endblock %}

<!-- Breadcrumb goes inside this block -->
{% block beforeContent %}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <h1>
        <span class="nhsuk-caption-l nhsuk-caption--top"> {{ serviceName }}</span>
        {{ contentTitle }}
      </h1>

      <form action="/app/start" method="get">
        <input type="submit" class="nhsuk-button" value="Start prototype">
        </input>
      </form>

      <h2>NHS App</h2>

      <ul class="app-list--unstyled app-list-cards">
        <li class="app-list-cards__item">
          <a href="app/ical/index">
            <h3 class="app-list-cards__heading nhsuk-heading-m">Reminders in the NHS App</h3>
            <p>iCal reminders exploration</p>
          </a>
        </li>

        <li class="app-list-cards__item">
          <a href="app/prescriptions/index">
            <h3 class="app-list-cards__heading nhsuk-heading-m">Repeat prescriptions</h3>
            <p>Prescriptions exploration</p>
          </a>
        </li>
      </ul>

      <h2>Contact preferences</h2>

      <ul class="app-list--unstyled app-list-cards">
        <li class="app-list-cards__item">
          <a href="/set-a-preference/index">
            <h3 class="app-list-cards__heading nhsuk-heading-m">Set a preference</h3>
            <p>Exploring how we could ask people if they had a preference</p>
          </a>
        </li>
        <li class="app-list-cards__item">
          <a href="/app/start">
            <h3 class="app-list-cards__heading nhsuk-heading-m">NHS app exploration</h3>
            <p>Exploring how we could ask people if they had a preference in the NHS app</p>
          </a>
        </li>
        <li class="app-list-cards__item">
          <a href="/examples/index">
            <h3 class="app-list-cards__heading nhsuk-heading-m">Example components</h3>
            <p>Ready made examples to copy</p>
          </a>
        </li>
      </ul>


    </div>
  </div>
{% endblock %}
